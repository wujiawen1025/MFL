/*
========================================================================================================================
**【文件描述】                                        【文件描述】                                        【文件描述】**
========================================================================================================================
**    文件名称: BodyScan.h                                                                                                         
**
**    功能描述: 人体扫描
**
**    公    司：蒙发利电子
**
**    项目名称：
**
**    平台信息：
**
**    作    者：Hzy
**
**    其他说明: 人体检测包含：肩高、背部曲线、酸痛、心率等。一般肩高和背部曲线由机芯部件完成。
**
**    修改记录:  --------------------------------------------------------------
**
========================================================================================================================
========================================================================================================================
*/
#ifndef  _BACKSCAN_H
#define  _BACKSCAN_H


/*
========================================================================================================================
* 【文件包含】                                         【文件包含】                                          【文件包含】
========================================================================================================================
*/
#include "bsp.h"
#include "core.h"


/*
========================================================================================================================
*【全局宏定义】                                       【全局宏定义】                                       【全局宏定义】
========================================================================================================================
*/



/*
========================================================================================================================
*【全局数据类型定义】                              【全局数据类型定义】                              【全局数据类型定义】
========================================================================================================================
*/
/*
************************************************************************************************************************
* 类型定义 :  人体扫描控制与状态标识                                                                              
************************************************************************************************************************
*/
typedef  union 
{
  uint16_t All;
  struct
  {
    uint8_t    Pause                     :5;    /*暂停*/
    uint8_t    Run                       :1;    /*运行*/
    uint8_t    Finish                    :1;    /*完成*/

    uint8_t    ShoulderAdjustEn          :1;    /*肩部调节使能*/
    uint8_t    ShoulderReCheck           :1;    /*标识肩部重新检测中*/
    uint8_t    NoHumanOnSeat             :1;    /*无人入座*/
  }Bit;

}BodyScanCSFlag_t;  /*Control State Flag  控制与状态标识*/

/*
************************************************************************************************************************
* 类型定义 :  人体扫描相关操作数据结构                                                                        
************************************************************************************************************************
*/
typedef struct
{
  BodyScanCSFlag_t          CSFlag;                     /*控制与状态标识*/

  uint8_t                   ScanStep;                   /*扫描步骤*/
  uint32_t                  ScanStepTimeMs;             /*扫描步骤时间*/
  uint32_t                  PromptToneOnOffTimeMs;      /*提示音开启关断时间*/

}BodyScan_t;


/*
========================================================================================================================
*【对外声明】                                          【对外声明】                                          【对外声明】
========================================================================================================================
*/

BodyScan_t*  BodyScan_Init(void);
void BodyScan_PauseOn(void);
void BodyScan_PauseOff(void);
#define BodyScan_UserAdjustShoulder(Adjust, KeyLS)     Core_BackScanSetShoulderAdjustOp(Adjust, KeyLS)
uint8_t BodyScan_ShoulderReCheck(void);
void BodyScan_Handle(Ticker_t ExePeriod);
BodyScanCSFlag_t BodyScan_GetCSFlag(void);

#endif
