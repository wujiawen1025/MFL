/*
========================================================================================================================
**【文件描述】                                        【文件描述】                                        【文件描述】**
========================================================================================================================
**    文件名称: CDP_CenServer.h                                                                                                         
**
**    功能描述: 通信数据包   之   中心板 <--> 上位机。
**
**    公    司: 蒙发利电子
**
**    项目名称:
**
**    平台信息:
**
**    作    者: LZH
**
**    其他说明: 
**
**    修改记录:  --------------------------------------------------------------
**
========================================================================================================================
========================================================================================================================
*/
#ifndef  _CDP_CEN_SERVER_H
#define  _CDP_CEN_SERVER_H

/*
========================================================================================================================
* 【文件包含】                                         【文件包含】                                          【文件包含】
========================================================================================================================
*/
#include "bsp.h"
#include "ESF.h"
#include "CDP_Common.h"

/*
========================================================================================================================
*【全局宏定义】                                       【全局宏定义】                                       【全局宏定义】
========================================================================================================================
*/


/*
========================================================================================================================
*【全局数据类型定义】                              【全局数据类型定义】                              【全局数据类型定义】
========================================================================================================================
*/
/*
************************************************************************************************************************
* 类型定义 :  中心板 <--> 服务器 控制与状态标识                                                                              
************************************************************************************************************************
*/
typedef  union 
{
  uint8_t All;
  struct
  {
    uint8_t    LinkLostFault          :1;
  }Bit;

}CDP_CenServerCSFlag_t;  /*Control State Flag  控制与状态标识*/

/*
************************************************************************************************************************
* 类型定义 :  中心板 <--> 服务器  相关操作数据结构                                                                            
************************************************************************************************************************
*/
typedef struct
{
  CDP_CenServerCSFlag_t      CSFlag;
  CDP_FrameRx_t              FrameRx;
  uint16_t                   ServerLinkLostTimeMs;                /*通信链接丢失时间 Ms*/
  uint16_t                   ServerLinkLostTimeSec;               /*通信链接丢失时间 S*/
  
}CDP_CenServer_t;


/*
========================================================================================================================
*【对外声明】                                          【对外声明】                                          【对外声明】
========================================================================================================================
*/
uint8_t CDP_CenServer_DataTx(ESF_Evt_t *pEvt);
CDP_CenServer_t* CDP_CenServer_Init(void);
void CDP_CenServer_FaultCheck(Ticker_t ExePeriod);
CDP_CenServerCSFlag_t CDP_CenServer_GetCSFlag(void);

#endif
