/*
========================================================================================================================
**【文件描述】                                        【文件描述】                                        【文件描述】**
========================================================================================================================
**    文件名称: bsp.c 
**
**    功能描述:板级支持包
**
**    公    司：蒙发利电子
**
**    项目名称：                                                                                                        
**
**    平台信息：                                                                                                        
**
**    作    者：LZH                                                                                                     
**
**    其他说明:                                                                                                        
**
**    修改记录:  
**
========================================================================================================================
========================================================================================================================
*/

/*
========================================================================================================================
* 【文件包含】                                         【文件包含】                                          【文件包含】
========================================================================================================================
*/
#include "bsp.h"

#include "bsp_gpio.h" 

/*
========================================================================================================================
*【本地宏定义】                                       【本地宏定义】                                       【本地宏定义】
========================================================================================================================
*/

/*
========================================================================================================================
*【本地数据类型定义】                              【本地数据类型定义】                              【本地数据类型定义】
========================================================================================================================
*/
/*
************************************************************************************************************************
* 类型定义 :                                                                                                          
************************************************************************************************************************
*/



/*
========================================================================================================================
*【变量定义 & 各种声明】                          【变量定义 & 各种声明】                          【变量定义 & 各种声明】    
========================================================================================================================
*/



/*
========================================================================================================================
*【函数定义】                                          【函数定义】                                          【函数定义】
========================================================================================================================
*/
/*
************************************************************************************************************************
* 函数名称 : BSP_Init                                                                                                        
* 功能描述 : 板级支持包 初始化。                                                                                                        
* 输入参数 : 无                                                                                                         
* 返回参数 : 无                                                                                                         
* 补充说明 : 无                                                                                                         
************************************************************************************************************************
*/
void  BSP_Init (void)
{
//  uint32_t DelayTick;

  /*一上电就要完成的初始化------------------------------*/
  #ifndef USE_BOOTLOADER
    BSP_EnInttrupt();                                  /*打开Boot中关闭的中断*/
  #endif

  nvic_priority_group_set(NVIC_PRIGROUP_PRE2_SUB2);    /* 设置系统中断优先级分组2 */
  
  BSP_IO_Init();                                       /* IO功能配置 */
//  BSP_PWMTmr_Init();                                   /* PWM 定时器 初始化 */
//  BSP_IO_SetOutput_ERPPowerSw(OFF);                    /* 关闭主电源 */
//  DelayTick = 20;//2000000;
//  while(DelayTick--);
//  BSP_IO_SetOutput_ERPPowerSw(ON);                     /* 开启主电源 */
//  DelayTick = 20;//2000000;
//  while(DelayTick--);

  /*等待电源稳定后的初始化------------------------------*/  
  BSP_UART_Init();                                     /* 串口 初始化 */
//  BSP_ADC_Init();                                      /* ADC 功能初始化 */
  BSP_FEEP_Init();                                     /*Flash模拟EEP初始化*/
  
  /*最后的初始化----------------------------------------*/
  BSP_SysTicker_Init();                                /* 系统定时器初始化 */
}

